<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>FitLog â€” ì˜¤ëŠ˜ì˜ ìš´ë™</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Noto+Sans+KR:wght@300;400;500;700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#070810; --s1:#0c0d18; --s2:#10121f; --s3:#161928; --s4:#1e2133;
  --brd:rgba(255,255,255,.055); --brd2:rgba(255,255,255,.1);
  --txt:#e2e6f5; --t2:rgba(226,230,245,.55); --t3:rgba(226,230,245,.28);
  --og:#ff4d00; --og2:#ff7a33; --og3:#ffaa77;
  --grn:#22c55e; --red:#ef4444; --blu:#4f8ef7; --yel:#f5c518;
  --pur:#a855f7;
  --sw:220px; --nav:58px; --r:12px;
}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--txt);font-family:'Noto Sans KR',sans-serif;min-height:100dvh;display:flex;overflow-x:hidden;-webkit-font-smoothing:antialiased}
::-webkit-scrollbar{width:3px}::-webkit-scrollbar-thumb{background:var(--s4);border-radius:2px}
body::before{content:'';position:fixed;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.025'/%3E%3C/svg%3E");pointer-events:none;z-index:0;opacity:.4}
.glow{position:fixed;border-radius:50%;filter:blur(140px);pointer-events:none;z-index:0}
.g1{width:600px;height:400px;top:-100px;right:-50px;transition:background .7s}
.g2{width:300px;height:300px;background:rgba(79,142,247,.03);bottom:20%;left:15%}

/* â”€â”€ ì‚¬ì´ë“œë°” â”€â”€ */
.sidebar{display:none!important}
.sb-logo{padding:22px 20px 16px;border-bottom:1px solid var(--brd)}
.sb-logo-txt{font-family:'Bebas Neue',sans-serif;font-size:26px;letter-spacing:3px;color:var(--og)}
.sb-logo-txt span{color:var(--t3)}
.sb-logo-sub{font-size:8px;font-family:'Space Mono',monospace;color:var(--t3);letter-spacing:2px;margin-top:2px}
.sb-user{padding:14px 20px;border-bottom:1px solid var(--brd);display:flex;align-items:center;gap:10px}
.sb-av{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--og),var(--og2));display:flex;align-items:center;justify-content:center;font-weight:900;font-size:13px;color:#fff;flex-shrink:0}
.sb-uname{font-size:13px;font-weight:700}
.sb-ulvl{font-size:9px;font-family:'Space Mono',monospace;color:var(--og);margin-top:2px}
.sb-nav{flex:1;padding:10px 8px;display:flex;flex-direction:column;gap:2px;overflow-y:auto}
.sb-sec{font-size:8px;font-family:'Space Mono',monospace;color:var(--t3);letter-spacing:2px;padding:10px 10px 4px}
.sb-item{display:flex;align-items:center;gap:10px;padding:9px 12px;border-radius:10px;cursor:pointer;font-size:13px;color:var(--t2);transition:all .18s;border:1px solid transparent}
.sb-item:hover{background:var(--s2);color:var(--txt)}
.sb-item.active{background:rgba(255,77,0,.1);color:var(--og);border-color:rgba(255,77,0,.18);font-weight:700}
.sb-ico{font-size:14px;width:17px;text-align:center}
.sb-foot{padding:14px 20px;border-top:1px solid var(--brd);font-size:10px;color:var(--t3);font-family:'Space Mono',monospace}

/* â”€â”€ ë©”ì¸ â”€â”€ */
.main{margin-left:0;flex:1;display:flex;flex-direction:column;min-height:100dvh;padding-bottom:0;position:relative;z-index:1}

/* â”€â”€ íƒ‘ë°” â”€â”€ */
.topbar{position:sticky;top:0;z-index:40;height:var(--nav);background:rgba(7,8,16,.93);backdrop-filter:blur(20px);border-bottom:1px solid var(--brd);display:flex;align-items:center;justify-content:space-between;padding:0 18px;gap:12px}
.tb-left{display:flex;align-items:center;gap:14px}
.tb-logo{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:3px;color:var(--og)}
.tb-logo span{color:var(--t3)}
.tb-title{display:none;font-family:'Bebas Neue',sans-serif;font-size:18px;letter-spacing:2px;color:var(--txt)}
.tb-elapsed{display:flex;align-items:center;gap:7px;background:var(--s2);border:1px solid var(--brd2);border-radius:30px;padding:5px 14px;transition:border-color .5s}
.tb-dot{width:6px;height:6px;border-radius:50%;animation:blink 1.4s ease infinite;transition:background .5s}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.2}}
.tb-elapsed-val{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:2px;line-height:1;transition:color .5s}
.tb-elapsed-lbl{font-size:8px;font-family:'Space Mono',monospace;color:var(--t3)}
.tb-right{display:flex;align-items:center;gap:8px}
.tb-btn{height:34px;padding:0 14px;border-radius:8px;border:1px solid var(--brd2);background:var(--s2);color:var(--t2);font-size:11px;font-family:'Space Mono',monospace;cursor:pointer;transition:all .18s;white-space:nowrap}
.tb-btn:hover{border-color:var(--og);color:var(--og)}
.tb-save{border:none;color:#fff;font-weight:700;font-family:'Noto Sans KR',sans-serif;font-size:12px;letter-spacing:.3px;transition:opacity .2s,transform .15s,background .5s}
.tb-save:hover{opacity:.88;transform:translateY(-1px)}

/* â”€â”€ ë°”ë”” ë ˆì´ì•„ì›ƒ â”€â”€ */
.body{padding:20px 16px;display:grid;grid-template-columns:1fr;gap:16px}
.left-col{display:flex;flex-direction:column;gap:14px}

/* â”€â”€ ê³µìš© ì¹´ë“œ/ì„¹ì…˜ â”€â”€ */
.card{background:var(--s1);border:1px solid var(--brd);border-radius:var(--r);overflow:hidden}
.card-head{display:flex;align-items:center;justify-content:space-between;padding:13px 18px;border-bottom:1px solid var(--brd)}
.card-title{font-size:9px;font-family:'Space Mono',monospace;color:var(--t3);letter-spacing:2px}
.card-action{font-size:10px;font-family:'Space Mono',monospace;color:var(--og);cursor:pointer;transition:opacity .15s}
.card-action:hover{opacity:.7}
.card-body{padding:14px 18px}

/* â”€â”€ ë‚ ì§œ + ì»¨ë””ì…˜ â”€â”€ */
.header-row{display:flex;flex-direction:column;gap:12px}
@media(min-width:640px){.header-row{flex-direction:row;align-items:stretch;gap:12px}}
.date-box{background:var(--s1);border:1px solid var(--brd);border-radius:var(--r);padding:14px 18px;display:flex;align-items:center;gap:12px;flex-shrink:0}
.date-box input[type=date]{background:none;border:none;color:var(--txt);font-family:'Space Mono',monospace;font-size:13px;outline:none;cursor:pointer}
.date-box input[type=date]::-webkit-calendar-picker-indicator{filter:invert(.35);cursor:pointer}
.cond-box{flex:1;background:var(--s1);border:1px solid var(--brd);border-radius:var(--r);padding:14px 18px}
.cond-lbl{font-size:8px;font-family:'Space Mono',monospace;color:var(--t3);letter-spacing:2px;margin-bottom:10px}
.cond-row{display:flex;gap:8px}
.cond-btn{flex:1;display:flex;flex-direction:column;align-items:center;gap:3px;padding:9px 6px;border-radius:10px;border:1px solid var(--brd);background:var(--s2);cursor:pointer;transition:all .18s}
.cond-btn:hover{border-color:var(--brd2);transform:translateY(-1px)}
.cond-btn.sel{border-color:rgba(255,77,0,.4);background:rgba(255,77,0,.1);box-shadow:0 0 14px rgba(255,77,0,.12)}
.cond-emo{font-size:20px;line-height:1}
.cond-txt{font-size:8px;font-family:'Space Mono',monospace;color:var(--t3)}
.cond-btn.sel .cond-txt{color:var(--og3)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ëª¨ë“œ ë°°ë„ˆ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.mode-banner{border-radius:var(--r);padding:16px 20px;display:flex;align-items:center;gap:14px;position:relative;overflow:hidden;transition:background .5s,border-color .5s}
.mode-banner::before{content:'';position:absolute;inset:0;background-size:40px 40px;opacity:.04;pointer-events:none;transition:background-image .5s}
.mode-banner.trainer{background:linear-gradient(135deg,rgba(168,85,247,.12),rgba(79,142,247,.07));border:1px solid rgba(168,85,247,.25)}
.mode-banner.trainer::before{background-image:radial-gradient(circle,rgba(168,85,247,.5) 1px,transparent 1px)}
.mode-banner.free{background:linear-gradient(135deg,rgba(255,77,0,.12),rgba(255,122,51,.05));border:1px solid rgba(255,77,0,.22)}
.mode-banner.free::before{background-image:radial-gradient(circle,rgba(255,77,0,.4) 1px,transparent 1px)}
.mb-icon{font-size:30px;flex-shrink:0;filter:drop-shadow(0 0 8px currentColor)}
.mb-body{flex:1;min-width:0}
.mb-tag{font-size:8px;font-family:'Space Mono',monospace;letter-spacing:2px;margin-bottom:4px;transition:color .5s}
.mb-title{font-size:15px;font-weight:900;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.mb-sub{font-size:11px;color:var(--t2);margin-top:2px}
.mb-chip{display:inline-flex;align-items:center;gap:4px;font-size:9px;font-family:'Space Mono',monospace;padding:3px 9px;border-radius:20px;margin-top:6px;transition:all .4s}
.mode-toggle{flex-shrink:0;padding:9px 15px;border-radius:9px;border:1px solid;font-size:11px;font-weight:700;font-family:'Noto Sans KR',sans-serif;cursor:pointer;transition:all .25s;white-space:nowrap;display:flex;align-items:center;gap:5px}
.mode-toggle:hover{transform:translateY(-1px)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   íŠ¸ë ˆì´ë„ˆ í”„ë¡œê·¸ë¨ ìŠ¤íƒ€ì¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/* ì§„í–‰ ë°” */
.prog-bar-card{background:var(--s1);border:1px solid rgba(168,85,247,.2);border-radius:var(--r);padding:14px 18px}
.pb-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.pb-label{font-size:9px;font-family:'Space Mono',monospace;color:rgba(168,85,247,.7);letter-spacing:1.5px}
.pb-count{font-size:11px;font-family:'Space Mono',monospace;color:var(--pur)}
.pb-track{height:5px;background:var(--s3);border-radius:3px;overflow:hidden}
.pb-fill{height:100%;border-radius:3px;background:linear-gradient(90deg,var(--pur),var(--blu));transition:width .6s cubic-bezier(.4,0,.2,1)}

/* íŠ¸ë ˆì´ë„ˆ ìš´ë™ ì¹´ë“œ */
.tex-card{background:var(--s1);border:1px solid var(--brd);border-radius:var(--r);overflow:hidden;transition:border-color .18s;animation:slideIn .32s cubic-bezier(.4,0,.2,1) both}
@keyframes slideIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.tex-card:hover{border-color:rgba(168,85,247,.2)}

.tex-head{display:flex;align-items:center;gap:10px;padding:13px 16px;cursor:pointer;user-select:none;border-bottom:1px solid transparent;transition:background .15s}
.tex-head:hover{background:rgba(255,255,255,.015)}
.tex-head.open{border-bottom-color:var(--brd)}
.tex-num{font-family:'Bebas Neue',sans-serif;font-size:22px;color:var(--pur);line-height:1;width:24px;flex-shrink:0}
.tex-name{font-size:13px;font-weight:700;flex:1}
.tex-badge{font-size:9px;font-family:'Space Mono',monospace;padding:3px 10px;border-radius:20px;background:rgba(168,85,247,.1);color:var(--pur);border:1px solid rgba(168,85,247,.2);transition:all .2s;flex-shrink:0}
.tex-badge.done-all{background:rgba(34,197,94,.12);color:var(--grn);border-color:rgba(34,197,94,.25)}
.tex-status{font-size:14px;flex-shrink:0;width:18px;text-align:center}
.tex-chev{color:var(--t3);font-size:12px;transition:transform .2s;flex-shrink:0}
.tex-chev.open{transform:rotate(180deg)}

.tex-body{padding:10px 14px 14px}

/* ì²˜ë°© ë°•ìŠ¤ */
.rx-box{display:flex;align-items:center;gap:8px;padding:9px 12px;background:rgba(168,85,247,.06);border:1px solid rgba(168,85,247,.14);border-radius:9px;margin-bottom:10px}
.rx-icon{font-size:14px}
.rx-label{font-size:10px;color:var(--t2);flex:1}
.rx-val{font-size:11px;font-family:'Space Mono',monospace;color:var(--pur);font-weight:700;white-space:nowrap}

/* PR íŒíŠ¸ */
.pr-hint{display:flex;align-items:center;gap:6px;font-size:10px;font-family:'Space Mono',monospace;color:var(--grn);padding:0 4px;margin-bottom:8px}

/* ì„¸íŠ¸ í…Œì´ë¸” í—¤ë”/í–‰ ê³µìš© */
.set-head{display:grid;gap:8px;padding:0 4px;margin-bottom:5px}
.set-head span{font-size:8px;font-family:'Space Mono',monospace;color:var(--t3);letter-spacing:.8px;text-align:center}
.set-head span:first-child{text-align:left}
.set-row{display:grid;gap:8px;align-items:center;padding:4px;border-radius:8px;transition:background .12s}
.set-row:hover{background:rgba(255,255,255,.02)}

/* íŠ¸ë ˆì´ë„ˆ ì„¸íŠ¸: 5ì»¬ëŸ¼ */
.t-cols{grid-template-columns:28px 1fr 1fr 52px 28px}

/* ì„¸íŠ¸ ë²ˆí˜¸ ë°•ìŠ¤ */
.sn{display:flex;align-items:center;justify-content:center;border-radius:7px;background:var(--s3);border:1px solid var(--brd);font-family:'Space Mono',monospace;font-size:10px;color:var(--t3);flex-shrink:0;transition:all .22s}
.sn-t{width:26px;height:26px}
.sn-f{width:28px;height:28px;font-size:11px;color:var(--t2)}
.sn.done{background:rgba(34,197,94,.1);border-color:rgba(34,197,94,.25);color:var(--grn)}
.sn.skip{background:rgba(239,68,68,.08);border-color:rgba(239,68,68,.18);color:var(--red)}

/* ìˆ«ì ì¸í’‹ */
.n-wrap{display:flex;align-items:center;background:var(--s3);border:1px solid var(--brd);border-radius:8px;overflow:hidden;transition:border-color .18s}
.n-wrap:focus-within{border-color:rgba(255,77,0,.4)}
.n-btn{width:26px;height:34px;border:none;background:none;color:var(--t3);font-size:14px;cursor:pointer;transition:color .15s,background .15s;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.n-btn:hover{color:var(--txt);background:rgba(255,255,255,.04)}
.n-inp{flex:1;text-align:center;background:none;border:none;color:var(--txt);font-family:'Space Mono',monospace;font-size:12px;outline:none;min-width:0;padding:0}
.n-inp::-webkit-inner-spin-button{display:none}

/* ë³¼ë¥¨ ì…€ */
.vcell{text-align:center;font-family:'Space Mono',monospace;font-size:10px;color:var(--t3);transition:color .15s}
.vcell.on{color:var(--og3);font-weight:700}

/* ì‚­ì œ ë²„íŠ¼ */
.s-del{width:26px;height:26px;border-radius:6px;border:none;background:transparent;color:var(--t3);font-size:12px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .15s;flex-shrink:0}
.s-del:hover{background:rgba(239,68,68,.12);color:var(--red)}

/* ì„¸íŠ¸ ì•¡ì…˜ ë°” */
.set-actions{display:flex;align-items:center;gap:8px;padding:6px 4px 0;border-top:1px dashed rgba(255,255,255,.055);margin-top:4px}
.btn-add-set{display:flex;align-items:center;gap:5px;background:none;border:1px dashed rgba(255,77,0,.22);color:var(--og3);padding:7px 12px;border-radius:7px;font-size:11px;cursor:pointer;font-family:'Noto Sans KR',sans-serif;font-weight:700;transition:all .18s}
.btn-add-set:hover{background:rgba(255,77,0,.07);border-color:var(--og)}
.btn-copy-set{background:none;border:1px solid var(--brd);color:var(--t2);padding:7px 10px;border-radius:7px;font-size:10px;cursor:pointer;font-family:'Space Mono',monospace;transition:all .18s;white-space:nowrap}
.btn-copy-set:hover{border-color:var(--brd2);color:var(--txt)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ììœ  ìš´ë™ ìŠ¤íƒ€ì¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.fav-chips{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px}
.fav-chip{display:flex;align-items:center;gap:5px;padding:6px 12px;border-radius:20px;border:1px solid var(--brd);background:var(--s2);font-size:11px;color:var(--t2);cursor:pointer;transition:all .18s;white-space:nowrap}
.fav-chip:hover{border-color:var(--brd2);color:var(--txt)}
.fav-chip.sel{background:rgba(255,77,0,.1);border-color:rgba(255,77,0,.3);color:var(--og);font-weight:700}
.custom-row{display:flex;gap:8px}
.custom-inp{flex:1;background:var(--s2);border:1px solid var(--brd);border-radius:8px;padding:9px 13px;color:var(--txt);font-size:12px;font-family:'Noto Sans KR',sans-serif;outline:none;transition:border-color .18s}
.custom-inp:focus{border-color:var(--og)}
.custom-inp::placeholder{color:var(--t3)}
.btn-add{height:38px;padding:0 16px;border-radius:8px;border:none;background:linear-gradient(135deg,var(--og),var(--og2));color:#fff;font-size:12px;font-weight:700;font-family:'Noto Sans KR',sans-serif;cursor:pointer;transition:opacity .15s}
.btn-add:hover{opacity:.85}

/* ììœ  ìš´ë™ ë¸”ë¡ */
.free-blocks{display:flex;flex-direction:column;gap:12px}
.fex-card{background:var(--s1);border:1px solid var(--brd);border-radius:var(--r);overflow:hidden;animation:slideIn .3s cubic-bezier(.4,0,.2,1) both;transition:border-color .18s}
.fex-card:hover{border-color:var(--brd2)}
.fex-head{display:flex;align-items:center;gap:10px;padding:12px 16px;cursor:pointer;user-select:none;border-bottom:1px solid transparent;transition:background .15s}
.fex-head:hover{background:rgba(255,255,255,.02)}
.fex-head.open{border-bottom-color:var(--brd)}
.fex-num{font-family:'Bebas Neue',sans-serif;font-size:21px;color:var(--og);line-height:1;width:22px;flex-shrink:0}
.fex-name{font-size:13px;font-weight:700;flex:1}
.fex-pr{font-size:9px;font-family:'Space Mono',monospace;color:var(--grn);flex-shrink:0}
.fex-badge{font-size:9px;font-family:'Space Mono',monospace;padding:3px 10px;border-radius:20px;background:rgba(255,77,0,.1);color:var(--og3);border:1px solid rgba(255,77,0,.18);flex-shrink:0}
.fex-del{width:26px;height:26px;border-radius:7px;border:1px solid transparent;background:transparent;color:var(--t3);font-size:13px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .18s;flex-shrink:0}
.fex-del:hover{border-color:var(--red);color:var(--red)}
.fex-chev{color:var(--t3);font-size:12px;transition:transform .2s;flex-shrink:0}
.fex-chev.open{transform:rotate(180deg)}
.fex-body{padding:10px 14px 12px}
/* ììœ  ì„¸íŠ¸: 5ì»¬ëŸ¼ */
.f-cols{grid-template-columns:32px 1fr 1fr 56px 28px}

/* â”€â”€ ë©”ëª¨ â”€â”€ */
.memo-area{width:100%;background:transparent;border:none;padding:13px 18px;color:var(--txt);font-size:12px;font-family:'Noto Sans KR',sans-serif;outline:none;resize:none;line-height:1.7}
.memo-area::placeholder{color:var(--t3)}

/* â”€â”€ ì‚¬ì´ë“œ íŒ¨ë„ â”€â”€ */
.side{display:flex;flex-direction:column;gap:14px;position:sticky;top:74px}

/* ì›í˜• íƒ€ì´ë¨¸ */
.timer-card{background:var(--s1);border:1px solid var(--brd);border-radius:var(--r);overflow:hidden}
.tc-head{padding:12px 16px;border-bottom:1px solid var(--brd);display:flex;align-items:center;justify-content:space-between}
.tc-title-lbl{font-size:8px;font-family:'Space Mono',monospace;color:var(--t3);letter-spacing:2px}
.tc-status{font-size:9px;font-family:'Space Mono',monospace;color:var(--t3)}
.tc-body{padding:16px}
.tc-ring-wrap{display:flex;justify-content:center;margin-bottom:14px;position:relative}
.timer-svg{width:120px;height:120px}
.timer-ring-bg{fill:none;stroke:var(--s3);stroke-width:5}
.timer-ring{fill:none;stroke:var(--og);stroke-width:5;stroke-linecap:round;stroke-dasharray:283;stroke-dashoffset:0;transform-origin:center;transform:rotate(-90deg);transition:stroke-dashoffset .5s linear,stroke .3s}
.timer-val{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.timer-num{font-family:'Bebas Neue',sans-serif;font-size:36px;color:var(--txt);letter-spacing:2px;line-height:1}
.timer-unit{font-size:8px;font-family:'Space Mono',monospace;color:var(--t3)}
.tc-presets{display:flex;gap:6px;margin-bottom:10px}
.tc-preset{flex:1;padding:7px 4px;border-radius:7px;border:1px solid var(--brd);background:var(--s2);color:var(--t2);font-size:10px;font-family:'Space Mono',monospace;cursor:pointer;text-align:center;transition:all .18s}
.tc-preset:hover{border-color:var(--brd2);color:var(--txt)}
.tc-preset.sel{background:rgba(255,77,0,.1);border-color:rgba(255,77,0,.3);color:var(--og)}
.tc-start{width:100%;padding:10px;border-radius:8px;border:none;background:linear-gradient(135deg,var(--og),var(--og2));color:#fff;font-size:12px;font-weight:700;font-family:'Noto Sans KR',sans-serif;cursor:pointer;transition:opacity .15s}
.tc-start:hover{opacity:.85}

/* ë³¼ë¥¨ ì¹´ë“œ */
.vol-card{background:var(--s1);border:1px solid var(--brd);border-radius:var(--r);overflow:hidden}
.vc-head{padding:12px 16px;border-bottom:1px solid var(--brd)}
.vc-title-lbl{font-size:8px;font-family:'Space Mono',monospace;color:var(--t3);letter-spacing:2px}
.vc-body{padding:16px}
.vol-big-wrap{display:flex;align-items:baseline;gap:6px;margin-bottom:14px}
.vol-big{font-family:'Bebas Neue',sans-serif;font-size:56px;line-height:1;color:var(--og);transition:color .5s}
.vol-big-unit{font-size:13px;color:var(--t3);font-family:'Space Mono',monospace}
.vol-bars{display:flex;flex-direction:column;gap:7px}
.vb-row{display:flex;align-items:center;gap:8px}
.vb-name{font-size:10px;color:var(--t2);width:64px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex-shrink:0}
.vb-track{flex:1;height:5px;background:var(--s3);border-radius:3px;overflow:hidden}
.vb-fill{height:100%;border-radius:3px;transition:width .5s cubic-bezier(.4,0,.2,1)}
.vb-val{font-size:9px;font-family:'Space Mono',monospace;color:var(--t2);width:48px;text-align:right;flex-shrink:0}
.vol-empty{font-size:10px;font-family:'Space Mono',monospace;color:var(--t3);text-align:center;padding:10px 0;line-height:1.7}

/* PR ë°°ì§€ */
.pr-badge{display:flex;align-items:center;gap:10px;padding:11px 14px;border-radius:9px;background:rgba(34,197,94,.07);border:1px solid rgba(34,197,94,.18);margin-top:12px;animation:prPop .5s cubic-bezier(.34,1.56,.64,1) both}
@keyframes prPop{from{opacity:0;transform:scale(.85)}to{opacity:1;transform:scale(1)}}
.pr-ico{font-size:22px}
.pr-txt{font-size:12px;font-weight:700;color:var(--grn)}
.pr-sub{font-size:9px;color:var(--t3);font-family:'Space Mono',monospace;margin-top:1px}

/* ì´ì „ ê¸°ë¡ */
.prev-card{background:var(--s1);border:1px solid var(--brd);border-radius:var(--r);overflow:hidden}
.pc-head{padding:12px 16px;border-bottom:1px solid var(--brd);display:flex;align-items:center;justify-content:space-between}
.pc-title-lbl{font-size:8px;font-family:'Space Mono',monospace;color:var(--t3);letter-spacing:2px}
.pc-ago{font-size:9px;font-family:'Space Mono',monospace;color:var(--t3)}
.pc-body{padding:12px 16px}
.prev-row{display:flex;align-items:center;gap:10px;padding:7px 0;border-bottom:1px solid var(--brd)}
.prev-row:last-of-type{border-bottom:none}
.prev-n{font-family:'Space Mono',monospace;font-size:9px;color:var(--t3);width:36px;flex-shrink:0}
.prev-val{font-family:'Space Mono',monospace;font-size:11px;color:var(--t2);flex:1}
.prev-v{font-family:'Space Mono',monospace;font-size:9px;color:var(--t3)}
.pc-total{display:flex;justify-content:space-between;padding:9px 0 0;border-top:1px solid var(--brd);margin-top:4px}
.pc-tlbl{color:var(--t3);font-family:'Space Mono',monospace;font-size:11px}
.pc-tval{color:var(--og);font-family:'Space Mono',monospace;font-weight:700;font-size:11px}
.pc-copy{width:100%;margin-top:10px;padding:9px;border-radius:8px;border:1px solid var(--brd2);background:transparent;color:var(--t2);font-size:11px;font-family:'Space Mono',monospace;cursor:pointer;transition:all .18s}
.pc-copy:hover{border-color:var(--blu);color:var(--blu)}

/* â”€â”€ ë°”í…€ íƒ­ â”€â”€ */
.bot-tab{display:none!important}
.t-item{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:3px;cursor:pointer;border:none;background:none;padding:0}
.t-icon{font-size:18px;line-height:1}
.t-label{font-size:8px;color:var(--t3);font-family:'Space Mono',monospace}
.t-item.active .t-label{color:var(--og)}

/* â”€â”€ í† ìŠ¤íŠ¸ â”€â”€ */
#toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%) translateY(20px);opacity:0;background:var(--s1);color:var(--txt);border:1px solid var(--brd2);padding:11px 22px;border-radius:40px;font-size:12px;font-weight:700;z-index:300;transition:all .4s cubic-bezier(.34,1.56,.64,1);white-space:nowrap;box-shadow:0 8px 32px rgba(0,0,0,.6)}
#toast.show{transform:translateX(-50%) translateY(0);opacity:1}
#toast{bottom:28px}
</style>
</head>
<body>
<div class="glow g1" id="glow1"></div>
<div class="glow g2"></div>

<!-- â”€â”€ ì‚¬ì´ë“œë°” â”€â”€ -->
<aside class="sidebar">
  <div class="sb-logo"><div class="sb-logo-txt">Fit<span>Log</span></div><div class="sb-logo-sub">MEMBER PORTAL</div></div>
  <div class="sb-user">
    <div class="sb-av">ê¹€</div>
    <div><div class="sb-uname">ê¹€ë¯¼ì¤€</div><div class="sb-ulvl">ğŸ¥‡ INTERMEDIATE</div></div>
  </div>
  <nav class="sb-nav">
    <div class="sb-sec">MAIN</div>
    <div class="sb-item"><span class="sb-ico">ğŸ“Š</span>ëŒ€ì‹œë³´ë“œ</div>
    <div class="sb-item active"><span class="sb-ico">ğŸ“</span>ì˜¤ëŠ˜ì˜ ìš´ë™</div>
    <div class="sb-item"><span class="sb-ico">ğŸ’ª</span>ìŠ¤íŠ¸ë ìŠ¤ ë ˆë²¨</div>
    <div class="sb-sec">CHALLENGE</div>
    <div class="sb-item"><span class="sb-ico">ğŸ¥•</span>ì±Œë¦°ì§€ í˜„í™©</div>
    <div class="sb-item"><span class="sb-ico">ğŸ†</span>í—¬ìŠ¤ì¥ ë­í‚¹</div>
    <div class="sb-item"><span class="sb-ico">ğŸ</span>ë³´ìƒ ë‚´ì—­</div>
    <div class="sb-sec">MY</div>
    <div class="sb-item"><span class="sb-ico">ğŸ‘¤</span>ë§ˆì´í˜ì´ì§€</div>
    <div class="sb-item"><span class="sb-ico">âš™ï¸</span>ì„¤ì •</div>
  </nav>
  <div class="sb-foot">FitLog v3.0 Â· ê°•ë‚¨ íŒŒì›Œì§</div>
</aside>

<!-- â”€â”€ ë©”ì¸ â”€â”€ -->
<div class="main">

  <!-- íƒ‘ë°” -->
  <div class="topbar">
    <div class="tb-left">
      <div class="tb-logo">Fit<span>Log</span></div>
      <div class="tb-title" id="tb-title">TODAY'S WORKOUT</div>
    </div>
    <div class="tb-elapsed" id="tb-elapsed">
      <div class="tb-dot" id="tb-dot"></div>
      <div>
        <div class="tb-elapsed-val" id="elapsed-val">00:00</div>
        <div class="tb-elapsed-lbl">WORKOUT TIME</div>
      </div>
    </div>
    <div class="tb-right">
      <button class="tb-btn" onclick="clearAll()">ğŸ—‘ ì´ˆê¸°í™”</button>
      <button class="tb-btn tb-save" id="save-btn" onclick="saveAll()">ğŸ’¾ ì €ì¥</button>
    </div>
  </div>

  <!-- ë°”ë”” -->
  <div class="body">

    <!-- â”€â”€ ì™¼ìª½ â”€â”€ -->
    <div class="left-col">

      <!-- ë‚ ì§œ + ì»¨ë””ì…˜ -->
      <div class="header-row">
        <div class="date-box">
          <span style="font-size:16px;opacity:.7">ğŸ“…</span>
          <div>
            <div style="font-size:8px;font-family:'Space Mono',monospace;color:var(--t3);letter-spacing:1px;margin-bottom:4px">DATE</div>
            <input type="date" id="workout-date">
          </div>
        </div>
        <div class="cond-box">
          <div class="cond-lbl">// ì˜¤ëŠ˜ ì»¨ë””ì…˜</div>
          <div class="cond-row">
            <div class="cond-btn" onclick="selCond(this)"><div class="cond-emo">ğŸ˜«</div><div class="cond-txt">ìµœì•…</div></div>
            <div class="cond-btn" onclick="selCond(this)"><div class="cond-emo">ğŸ˜•</div><div class="cond-txt">ë‚˜ì¨</div></div>
            <div class="cond-btn sel" onclick="selCond(this)"><div class="cond-emo">ğŸ˜Š</div><div class="cond-txt">ì¢‹ìŒ</div></div>
            <div class="cond-btn" onclick="selCond(this)"><div class="cond-emo">ğŸ’ª</div><div class="cond-txt">ìµœê³ </div></div>
            <div class="cond-btn" onclick="selCond(this)"><div class="cond-emo">ğŸ”¥</div><div class="cond-txt">ë¶ˆíƒ€</div></div>
          </div>
        </div>
      </div>

      <!-- ëª¨ë“œ ë°°ë„ˆ -->
      <div class="mode-banner trainer" id="mode-banner">
        <div class="mb-icon" id="mb-icon">ğŸ¤–</div>
        <div class="mb-body">
          <div class="mb-tag" id="mb-tag">// TRAINER PROGRAM</div>
          <div class="mb-title" id="mb-title">ì´ì¤€í˜¸ íŠ¸ë ˆì´ë„ˆì˜ ì˜¤ëŠ˜ ë£¨í‹´</div>
          <div class="mb-sub" id="mb-sub">ê°€ìŠ´ + ì‚¼ë‘ ì§‘ì¤‘ì¼ Â· ì£¼ 4ì¼ í”Œëœ Day 1</div>
          <div class="mb-chip" id="mb-chip">âœ“ 3ì¼ ì „ ë°°í¬ë¨</div>
        </div>
        <button class="mode-toggle" id="mode-toggle-btn" onclick="switchMode()">
          <span>ğŸƒ</span><span>ììœ ìš´ë™</span>
        </button>
      </div>

      <!-- â•â• íŠ¸ë ˆì´ë„ˆ í”„ë¡œê·¸ë¨ ì˜ì—­ â•â• -->
      <div id="trainer-area">
        <!-- ì§„í–‰ ë°” -->
        <div class="prog-bar-card">
          <div class="pb-head">
            <div class="pb-label">// ì˜¤ëŠ˜ ì§„í–‰ë„</div>
            <div class="pb-count" id="pb-count">0 / 4 ì¢…ëª© ì™„ë£Œ</div>
          </div>
          <div class="pb-track"><div class="pb-fill" id="pb-fill" style="width:0%"></div></div>
        </div>
        <!-- íŠ¸ë ˆì´ë„ˆ ìš´ë™ ì¹´ë“œë“¤ -->
        <div style="display:flex;flex-direction:column;gap:12px;margin-top:12px" id="trainer-blocks"></div>
      </div>

      <!-- â•â• ììœ  ìš´ë™ ì˜ì—­ â•â• -->
      <div id="free-area" style="display:none">
        <div class="card">
          <div class="card-head">
            <div class="card-title">// ìš´ë™ ì¢…ëª© ì¶”ê°€</div>
            <div class="card-action" onclick="toggleFavSection()">ì¦ê²¨ì°¾ê¸° â–¾</div>
          </div>
          <div class="card-body" id="fav-section">
            <div class="fav-chips" id="fav-chips">
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ¦µ','ë ˆê·¸ìµìŠ¤í…ì…˜')"><span>ğŸ¦µ</span>ë ˆê·¸ìµìŠ¤í…ì…˜</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ¦µ','ë¼ì‰ë ˆê·¸ì»¬')"><span>ğŸ¦µ</span>ë¼ì‰ë ˆê·¸ì»¬</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ¦µ','ì‹œí‹°ë“œë ˆê·¸ì»¬')"><span>ğŸ¦µ</span>ì‹œí‹°ë“œë ˆê·¸ì»¬</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ¦¿','ì´ë„ˆíƒ€ì´')"><span>ğŸ¦¿</span>ì´ë„ˆíƒ€ì´</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ¦¿','ì•„ì›ƒíƒ€ì´')"><span>ğŸ¦¿</span>ì•„ì›ƒíƒ€ì´</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ‹ï¸','íŒŒì›Œë ˆê·¸í”„ë ˆìŠ¤')"><span>ğŸ‹ï¸</span>íŒŒì›Œë ˆê·¸í”„ë ˆìŠ¤</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ”¥','í¼íŒ©íŠ¸ìŠ¤ì¿¼íŠ¸')"><span>ğŸ”¥</span>í¼íŒ©íŠ¸ìŠ¤ì¿¼íŠ¸</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'â¬‡ï¸','ë«í’€ë‹¤ìš´')"><span>â¬‡ï¸</span>ë«í’€ë‹¤ìš´</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ’ª','ë¡±í’€')"><span>ğŸ’ª</span>ë¡±í’€</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸš£','ì‹œí‹°ë“œë¡œìš°')"><span>ğŸš£</span>ì‹œí‹°ë“œë¡œìš°</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ‹ï¸','í‹°ë°”ë¡œìš°')"><span>ğŸ‹ï¸</span>í‹°ë°”ë¡œìš°</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ†™','ì–´ì‹œìŠ¤íŠ¸í’€ì—…(ìŠ¤íƒ ë”©)')"><span>ğŸ†™</span>ì–´ì‹œìŠ¤íŠ¸í’€ì—…(ìŠ¤íƒ ë”©)</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ†™','ì–´ì‹œìŠ¤íŠ¸í’€ì—…(ë‹ë§)')"><span>ğŸ†™</span>ì–´ì‹œìŠ¤íŠ¸í’€ì—…(ë‹ë§)</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'â¬‡ï¸','ì–´ì‹œìŠ¤íŠ¸ë”¥ìŠ¤(ìŠ¤íƒ ë”©)')"><span>â¬‡ï¸</span>ì–´ì‹œìŠ¤íŠ¸ë”¥ìŠ¤(ìŠ¤íƒ ë”©)</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'â¬‡ï¸','ì–´ì‹œìŠ¤íŠ¸ë”¥ìŠ¤(ë‹ë§)')"><span>â¬‡ï¸</span>ì–´ì‹œìŠ¤íŠ¸ë”¥ìŠ¤(ë‹ë§)</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ¦‹','íŒ©ë±í”Œë¼ì´')"><span>ğŸ¦‹</span>íŒ©ë±í”Œë¼ì´</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ”„','ë¦¬ë²„ìŠ¤í”Œë¼ì´')"><span>ğŸ”„</span>ë¦¬ë²„ìŠ¤í”Œë¼ì´</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ’ª','ìŠ¤íƒ ë”©ì²´ìŠ¤íŠ¸í”„ë ˆìŠ¤')"><span>ğŸ’ª</span>ìŠ¤íƒ ë”©ì²´ìŠ¤íŠ¸í”„ë ˆìŠ¤</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ‹ï¸','ìˆ„ë”í”„ë ˆìŠ¤')"><span>ğŸ‹ï¸</span>ìˆ„ë”í”„ë ˆìŠ¤</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ“','ì¸í´ë¼ì¸í”„ë ˆìŠ¤')"><span>ğŸ“</span>ì¸í´ë¼ì¸í”„ë ˆìŠ¤</div>
              <div class="fav-chip" onclick="toggleFavChip(this,'ğŸ‹ï¸','ì²´ìŠ¤íŠ¸í”„ë ˆìŠ¤')"><span>ğŸ‹ï¸</span>ì²´ìŠ¤íŠ¸í”„ë ˆìŠ¤</div>
            </div>
            <div class="custom-row">
              <input class="custom-inp" type="text" id="custom-inp" placeholder="ì§ì ‘ ì…ë ¥..." onkeydown="if(event.key==='Enter')addCustomEx()">
              <button class="btn-add" onclick="addCustomEx()">+ ì¶”ê°€</button>
            </div>
          </div>
        </div>
        <div class="free-blocks" id="free-blocks" style="margin-top:12px"></div>
      </div>

    </div><!-- /left -->

    <!-- â”€â”€ ì‚¬ì´ë“œ â”€â”€ -->
    <div class="side">

      <!-- ì›í˜• íƒ€ì´ë¨¸ -->
      <div class="timer-card">
        <div class="tc-head">
          <div class="tc-title-lbl">// ì„¸íŠ¸ íœ´ì‹ íƒ€ì´ë¨¸</div>
          <div class="tc-status" id="tc-status">ëŒ€ê¸°ì¤‘</div>
        </div>
        <div class="tc-body">
          <div class="tc-ring-wrap">
            <svg class="timer-svg" viewBox="0 0 100 100">
              <circle class="timer-ring-bg" cx="50" cy="50" r="45"/>
              <circle class="timer-ring" id="timer-ring" cx="50" cy="50" r="45"/>
            </svg>
            <div class="timer-val">
              <div class="timer-num" id="timer-display">01:30</div>
              <div class="timer-unit">REST</div>
            </div>
          </div>
          <div class="tc-presets">
            <div class="tc-preset" onclick="setTimer(60,this)">1ë¶„</div>
            <div class="tc-preset sel" onclick="setTimer(90,this)">90ì´ˆ</div>
            <div class="tc-preset" onclick="setTimer(120,this)">2ë¶„</div>
            <div class="tc-preset" onclick="setTimer(180,this)">3ë¶„</div>
          </div>
          <button class="tc-start" id="tc-start-btn" onclick="toggleTimer()">â–¶ ì‹œì‘</button>
        </div>
      </div>

      <!-- ë³¼ë¥¨ -->
      <div class="vol-card">
        <div class="vc-head"><div class="vc-title-lbl">// ì˜¤ëŠ˜ ì´ ë³¼ë¥¨</div></div>
        <div class="vc-body">
          <div class="vol-big-wrap">
            <div class="vol-big" id="vol-big">0</div>
            <div class="vol-big-unit">kg</div>
          </div>
          <div class="vol-bars" id="vol-bars">
            <div class="vol-empty">ì„¸íŠ¸ë¥¼ ì…ë ¥í•˜ë©´<br>ìë™ ê³„ì‚°ë©ë‹ˆë‹¤</div>
          </div>
          <div id="pr-wrap"></div>
        </div>
      </div>

      <!-- ì´ì „ ê¸°ë¡ -->
      <div class="prev-card">
        <div class="pc-head">
          <div class="pc-title-lbl">// ì§€ë‚œ ë²¤ì¹˜í”„ë ˆìŠ¤</div>
          <div class="pc-ago">5ì¼ ì „</div>
        </div>
        <div class="pc-body">
          <div class="prev-row"><div class="prev-n">SET 1</div><div class="prev-val">60kg Ã— 12</div><div class="prev-v">720kg</div></div>
          <div class="prev-row"><div class="prev-n">SET 2</div><div class="prev-val">80kg Ã— 8</div><div class="prev-v">640kg</div></div>
          <div class="prev-row"><div class="prev-n">SET 3</div><div class="prev-val">95kg Ã— 5</div><div class="prev-v">475kg</div></div>
          <div class="prev-row"><div class="prev-n">SET 4</div><div class="prev-val">100kg Ã— 3</div><div class="prev-v">300kg</div></div>
          <div class="pc-total"><span class="pc-tlbl">ì´ ë³¼ë¥¨</span><span class="pc-tval">2,135 kg</span></div>
          <button class="pc-copy" onclick="copyPrevRecord()">ğŸ“‹ ì´ì „ ê¸°ë¡ ê·¸ëŒ€ë¡œ ë³µì‚¬</button>
        </div>
      </div>

    </div><!-- /side -->
  </div><!-- /body -->
</div><!-- /main -->

<!-- ë°”í…€ íƒ­ -->
<div class="bot-tab">
  <button class="t-item" onclick="actTab(this)"><span class="t-icon">ğŸ </span><span class="t-label">í™ˆ</span></button>
  <button class="t-item active" onclick="actTab(this)"><span class="t-icon">ğŸ“</span><span class="t-label">ìš´ë™ê¸°ë¡</span></button>
  <button class="t-item" onclick="actTab(this)"><span class="t-icon">ğŸ“Š</span><span class="t-label">í†µê³„</span></button>
  <button class="t-item" onclick="actTab(this)"><span class="t-icon">ğŸ†</span><span class="t-label">ë­í‚¹</span></button>
  <button class="t-item" onclick="actTab(this)"><span class="t-icon">ğŸ‘¤</span><span class="t-label">ë§ˆì´</span></button>
</div>

<div id="toast"></div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ë°ì´í„°
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TRAINER_PROG = {
  exercises: [
    { id:'tp1', icon:'ğŸ‹ï¸', name:'ë²¤ì¹˜í”„ë ˆìŠ¤',       rx:'4ì„¸íŠ¸ Ã— 6íšŒ  Â·  RPE 8  Â·  80% 1RM', tSets:4, prevPR:100, sets:[] },
    { id:'tp2', icon:'ğŸ“', name:'ì¸í´ë¼ì¸ ë¤ë²¨ í”„ë ˆìŠ¤', rx:'3ì„¸íŠ¸ Ã— 10íšŒ  Â·  RPE 7.5',          tSets:3, prevPR:null, sets:[] },
    { id:'tp3', icon:'ğŸ”', name:'ë”¥ìŠ¤ (ê°€ì¤‘)',         rx:'3ì„¸íŠ¸ Ã— 8íšŒ  Â·  ì²´ì¤‘ + ê°€ì¤‘',         tSets:3, prevPR:null, sets:[] },
    { id:'tp4', icon:'ğŸ’ª', name:'ì¼€ì´ë¸” íŠ¸ë¼ì´ì…‰ìŠ¤',    rx:'3ì„¸íŠ¸ Ã— 12íšŒ  Â·  ê°€ë³ê²Œ ë§ˆë¬´ë¦¬',       tSets:3, prevPR:null, sets:[] }
  ]
};

const FREE = {};  // { id: { icon, name, sets:[] } }
const PR_DATA = {};
let prShown = {};
let mode = 'trainer'; // 'trainer' | 'free'
let tSetCnt = 0, fSetCnt = 0, fExCnt = 0, fBlkOrder = 0;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ì´ˆê¸°í™”
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.getElementById('workout-date').value = new Date().toISOString().split('T')[0];

// ê²½ê³¼ íƒ€ì´ë¨¸
let elapsed = 0;
setInterval(() => {
  elapsed++;
  const m = String(Math.floor(elapsed/60)).padStart(2,'0');
  const s = String(elapsed%60).padStart(2,'0');
  document.getElementById('elapsed-val').textContent = m+':'+s;
}, 1000);

function selCond(el) {
  document.querySelectorAll('.cond-btn').forEach(b=>b.classList.remove('sel'));
  el.classList.add('sel');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ëª¨ë“œ ì „í™˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function switchMode() {
  if (mode === 'trainer') {
    if (!confirm('íŠ¸ë ˆì´ë„ˆ í”„ë¡œê·¸ë¨ì„ ë²—ì–´ë‚˜ ììœ  ìš´ë™ ëª¨ë“œë¡œ ì „í™˜í• ê¹Œìš”?\nì´ë¯¸ ì…ë ¥í•œ ì„¸íŠ¸ ê¸°ë¡ì€ ìœ ì§€ë©ë‹ˆë‹¤.')) return;
    mode = 'free';
    setFreeUI();
  } else {
    if (!confirm('íŠ¸ë ˆì´ë„ˆ í”„ë¡œê·¸ë¨ ëª¨ë“œë¡œ ëŒì•„ê°ˆê¹Œìš”?')) return;
    mode = 'trainer';
    setTrainerUI();
  }
}

function setTrainerUI() {
  // ê¸€ë¡œìš°
  document.getElementById('glow1').style.background = 'rgba(168,85,247,.05)';
  // ë°°ë„ˆ
  document.getElementById('mode-banner').className = 'mode-banner trainer';
  document.getElementById('mb-icon').textContent = 'ğŸ¤–';
  document.getElementById('mb-tag').style.color = 'var(--pur)';
  document.getElementById('mb-tag').textContent = '// TRAINER PROGRAM';
  document.getElementById('mb-title').textContent = 'ì´ì¤€í˜¸ íŠ¸ë ˆì´ë„ˆì˜ ì˜¤ëŠ˜ ë£¨í‹´';
  document.getElementById('mb-sub').textContent = 'ê°€ìŠ´ + ì‚¼ë‘ ì§‘ì¤‘ì¼ Â· ì£¼ 4ì¼ í”Œëœ Day 1';
  document.getElementById('mb-chip').style.cssText = 'display:inline-flex;align-items:center;gap:4px;font-size:9px;font-family:Space Mono,monospace;padding:3px 9px;border-radius:20px;margin-top:6px;background:rgba(168,85,247,.12);color:var(--pur);border:1px solid rgba(168,85,247,.2)';
  document.getElementById('mb-chip').textContent = 'âœ“ 3ì¼ ì „ ë°°í¬ë¨';
  // í† ê¸€ ë²„íŠ¼
  const btn = document.getElementById('mode-toggle-btn');
  btn.style.cssText = 'flex-shrink:0;padding:9px 15px;border-radius:9px;border:1px solid rgba(255,77,0,.28);color:var(--og3);background:rgba(255,77,0,.07);font-size:11px;font-weight:700;font-family:Noto Sans KR,sans-serif;cursor:pointer;transition:all .25s;white-space:nowrap;display:flex;align-items:center;gap:5px';
  btn.innerHTML = '<span>ğŸƒ</span><span>ììœ ìš´ë™</span>';
  // íƒ‘ë°” ìƒ‰ìƒ
  document.getElementById('tb-dot').style.background = 'var(--pur)';
  document.getElementById('elapsed-val').style.color = 'var(--pur)';
  document.getElementById('save-btn').style.background = 'linear-gradient(135deg,var(--pur),var(--blu))';
  document.getElementById('vol-big').style.color = 'var(--pur)';
  // ì˜ì—­
  document.getElementById('trainer-area').style.display = 'block';
  document.getElementById('free-area').style.display = 'none';
  updateVol();
  toast('ğŸ¤– íŠ¸ë ˆì´ë„ˆ í”„ë¡œê·¸ë¨ ëª¨ë“œ');
}

function setFreeUI() {
  // ê¸€ë¡œìš°
  document.getElementById('glow1').style.background = 'rgba(255,77,0,.04)';
  // ë°°ë„ˆ
  document.getElementById('mode-banner').className = 'mode-banner free';
  document.getElementById('mb-icon').textContent = 'ğŸƒ';
  document.getElementById('mb-tag').style.color = 'var(--og)';
  document.getElementById('mb-tag').textContent = '// FREE WORKOUT';
  document.getElementById('mb-title').textContent = 'ììœ  ìš´ë™ ëª¨ë“œ';
  document.getElementById('mb-sub').textContent = 'ì›í•˜ëŠ” ì¢…ëª©ì„ ììœ ë¡­ê²Œ ì¶”ê°€í•˜ì„¸ìš”';
  document.getElementById('mb-chip').style.cssText = 'display:inline-flex;align-items:center;gap:4px;font-size:9px;font-family:Space Mono,monospace;padding:3px 9px;border-radius:20px;margin-top:6px;background:rgba(255,77,0,.08);color:var(--og3);border:1px solid rgba(255,77,0,.15)';
  document.getElementById('mb-chip').textContent = 'íŠ¸ë ˆì´ë„ˆ ì²˜ë°© ì—†ì´ ì§„í–‰ ì¤‘';
  // í† ê¸€ ë²„íŠ¼
  const btn = document.getElementById('mode-toggle-btn');
  btn.style.cssText = 'flex-shrink:0;padding:9px 15px;border-radius:9px;border:1px solid rgba(168,85,247,.28);color:var(--pur);background:rgba(168,85,247,.07);font-size:11px;font-weight:700;font-family:Noto Sans KR,sans-serif;cursor:pointer;transition:all .25s;white-space:nowrap;display:flex;align-items:center;gap:5px';
  btn.innerHTML = '<span>ğŸ¤–</span><span>íŠ¸ë ˆì´ë„ˆ ëª¨ë“œ</span>';
  // íƒ‘ë°” ìƒ‰ìƒ
  document.getElementById('tb-dot').style.background = 'var(--og)';
  document.getElementById('elapsed-val').style.color = 'var(--og)';
  document.getElementById('save-btn').style.background = 'linear-gradient(135deg,var(--og),var(--og2))';
  document.getElementById('vol-big').style.color = 'var(--og)';
  // ì˜ì—­
  document.getElementById('trainer-area').style.display = 'none';
  document.getElementById('free-area').style.display = 'block';
  updateVol();
  toast('ğŸƒ ììœ  ìš´ë™ ëª¨ë“œë¡œ ì „í™˜');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   íŠ¸ë ˆì´ë„ˆ í”„ë¡œê·¸ë¨ ë Œë”
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function renderTrainerProg() {
  const container = document.getElementById('trainer-blocks');
  TRAINER_PROG.exercises.forEach((ex, idx) => {
    const div = document.createElement('div');
    div.className = 'tex-card';
    div.id = 'tblk_'+ex.id;
    div.style.animationDelay = (idx*.07)+'s';
    div.innerHTML = `
      <div class="tex-head open" id="thead_${ex.id}" onclick="togTBlock('${ex.id}')">
        <div class="tex-num">${idx+1}</div>
        <div style="flex:1;min-width:0">
          <div class="tex-name">${ex.icon} ${ex.name}</div>
        </div>
        <div class="tex-badge" id="tbadge_${ex.id}">0 / ${ex.tSets} SET</div>
        <div class="tex-status" id="tstatus_${ex.id}"></div>
        <div class="tex-chev open" id="tchev_${ex.id}">â–¾</div>
      </div>
      <div class="tex-body" id="tbody_${ex.id}">
        <div class="rx-box">
          <span class="rx-icon">ğŸ“‹</span>
          <span class="rx-label">íŠ¸ë ˆì´ë„ˆ ì²˜ë°©</span>
          <span class="rx-val">${ex.rx}</span>
        </div>
        ${ex.prevPR ? `<div class="pr-hint">ğŸ… í˜„ì¬ PR Â· ${ex.prevPR}kg â€” ì´ê±¸ ë„˜ì–´ë´ìš”!</div>` : ''}
        <div class="set-head t-cols"><span>SET</span><span>ë¬´ê²Œ kg</span><span>íšŸìˆ˜ íšŒ</span><span>ë³¼ë¥¨</span><span></span></div>
        <div id="tsets_${ex.id}"></div>
        <div class="set-actions">
          <button class="btn-add-set" onclick="addTSet('${ex.id}')">ï¼‹ ì„¸íŠ¸ ì¶”ê°€</button>
          <button class="btn-copy-set" onclick="copyLastTSet('${ex.id}')">â†• ì´ì „ ë³µì‚¬</button>
        </div>
      </div>`;
    container.appendChild(div);
    // ì²˜ë°© ì„¸íŠ¸ ìˆ˜ë§Œí¼ ìë™ ìƒì„±
    for (let i = 0; i < ex.tSets; i++) addTSet(ex.id, true);
  });
  updateProgress();
}

function togTBlock(id) {
  const body = document.getElementById('tbody_'+id);
  const head = document.getElementById('thead_'+id);
  const chev = document.getElementById('tchev_'+id);
  const open = body.style.display !== 'none';
  body.style.display = open ? 'none' : 'block';
  head.classList.toggle('open', !open);
  chev.classList.toggle('open', !open);
}

function addTSet(exId, silent=false) {
  const ex = TRAINER_PROG.exercises.find(e=>e.id===exId);
  const sid = 'ts_'+(++tSetCnt);
  const sn  = ex.sets.length+1;
  ex.sets.push({id:sid, weight:'', reps:''});
  const row = document.createElement('div');
  row.className = 'set-row t-cols'; row.id = sid;
  row.innerHTML = `
    <div class="sn sn-t" id="tsn_${sid}">${sn}</div>
    <div class="n-wrap">
      <button class="n-btn" onclick="adj('tw_${sid}',-2.5)">âˆ’</button>
      <input class="n-inp" type="number" id="tw_${sid}" value="" placeholder="kg" min="0" step="2.5" oninput="onTChg('${exId}','${sid}')">
      <button class="n-btn" onclick="adj('tw_${sid}',2.5)">ï¼‹</button>
    </div>
    <div class="n-wrap">
      <button class="n-btn" onclick="adj('tr_${sid}',-1)">âˆ’</button>
      <input class="n-inp" type="number" id="tr_${sid}" value="" placeholder="íšŒ" min="0" step="1" oninput="onTChg('${exId}','${sid}')">
      <button class="n-btn" onclick="adj('tr_${sid}',1)">ï¼‹</button>
    </div>
    <div class="vcell" id="tvol_${sid}">â€”</div>
    <button class="s-del" onclick="delTSet('${exId}','${sid}')">âœ•</button>`;
  document.getElementById('tsets_'+exId).appendChild(row);
  if (!silent) updateTBadge(exId);
}

function copyLastTSet(exId) {
  const ex = TRAINER_PROG.exercises.find(e=>e.id===exId);
  if (!ex.sets.length) return;
  const last = ex.sets[ex.sets.length-1];
  addTSet(exId);
  setTimeout(() => {
    const ns = ex.sets[ex.sets.length-1];
    document.getElementById('tw_'+ns.id).value = last.weight||'';
    document.getElementById('tr_'+ns.id).value = last.reps||'';
    onTChg(exId, ns.id);
  }, 30);
}

function delTSet(exId, sid) {
  const ex = TRAINER_PROG.exercises.find(e=>e.id===exId);
  ex.sets = ex.sets.filter(s=>s.id!==sid);
  document.getElementById(sid)?.remove();
  document.querySelectorAll('#tsets_'+exId+' .sn').forEach((el,i)=>el.textContent=i+1);
  updateTBadge(exId); updateVol();
}

function onTChg(exId, sid) {
  const w = parseFloat(document.getElementById('tw_'+sid).value)||0;
  const r = parseFloat(document.getElementById('tr_'+sid).value)||0;
  const v = w*r;
  const ve = document.getElementById('tvol_'+sid);
  ve.textContent = v>0 ? v.toLocaleString()+'kg' : 'â€”';
  ve.className = 'vcell'+(v>0?' on':'');
  document.getElementById('tsn_'+sid).className = 'sn sn-t'+(v>0?' done':'');
  const ex = TRAINER_PROG.exercises.find(e=>e.id===exId);
  const s = ex?.sets.find(x=>x.id===sid);
  if (s) { s.weight=w; s.reps=r; }
  updateTBadge(exId); updateVol();
  if (ex?.prevPR && w > ex.prevPR) showPR(ex.name, w - ex.prevPR);
}

function updateTBadge(exId) {
  const ex   = TRAINER_PROG.exercises.find(e=>e.id===exId);
  const done = ex.sets.filter(s=>(s.weight||0)>0 && (s.reps||0)>0).length;
  const badge = document.getElementById('tbadge_'+exId);
  if (badge) {
    badge.textContent = done+' / '+ex.tSets+' SET';
    badge.className = 'tex-badge'+(done>=ex.tSets?' done-all':'');
  }
  const st = document.getElementById('tstatus_'+exId);
  if (st) st.textContent = done>=ex.tSets ? 'âœ…' : done>0 ? 'â³' : '';
  updateProgress();
}

function updateProgress() {
  const total = TRAINER_PROG.exercises.length;
  const done  = TRAINER_PROG.exercises.filter(ex=>
    ex.sets.filter(s=>(s.weight||0)>0&&(s.reps||0)>0).length >= ex.tSets
  ).length;
  document.getElementById('pb-count').textContent = done+' / '+total+' ì¢…ëª© ì™„ë£Œ';
  document.getElementById('pb-fill').style.width = (done/total*100)+'%';
  if (done===total) setTimeout(()=>toast('ğŸ‰ ì˜¤ëŠ˜ í”„ë¡œê·¸ë¨ ì™„ë£Œ! ì €ì¥í•˜ì„¸ìš”'), 400);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ììœ  ìš´ë™ ë¡œì§
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleFavSection() {
  const s = document.getElementById('fav-section');
  s.style.display = s.style.display==='none' ? 'block' : 'none';
}

function toggleFavChip(chip, icon, name) {
  chip.classList.toggle('sel');
  if (chip.classList.contains('sel')) addFreeEx(icon, name);
  else { const id = Object.keys(FREE).find(k=>FREE[k].name===name); if(id) removeFreeEx(id); }
}

function addCustomEx() {
  const inp = document.getElementById('custom-inp');
  const name = inp.value.trim(); if (!name) return;
  addFreeEx('ğŸ’ª', name); inp.value='';
}

function addFreeEx(icon, name) {
  if (Object.values(FREE).some(e=>e.name===name)) return;
  const id = 'fx_'+(++fExCnt);
  FREE[id] = {icon, name, sets:[]};
  renderFreeBlock(id);
  addFreeSet(id);
}

function removeFreeEx(id) {
  const el = document.getElementById('fblk_'+id);
  if (el) { el.style.opacity='0'; el.style.transform='translateX(-6px)'; el.style.transition='all .22s'; setTimeout(()=>el.remove(),220); }
  delete FREE[id]; updateVol();
}

function renderFreeBlock(id) {
  const ex = FREE[id]; const hasPR = PR_DATA[ex.name]!==undefined;
  fBlkOrder++;
  const div = document.createElement('div'); div.className='fex-card'; div.id='fblk_'+id;
  div.style.animationDelay = ((fBlkOrder-1)*.05)+'s';
  div.innerHTML = `
    <div class="fex-head open" id="fhead_${id}" onclick="togFBlock('${id}')">
      <div class="fex-num">${fBlkOrder}</div>
      <div class="fex-name">${ex.icon} ${ex.name}</div>
      ${hasPR ? `<div class="fex-pr">PR ${PR_DATA[ex.name]}kg</div>` : ''}
      <div class="fex-badge" id="fbadge_${id}">0 SET</div>
      <button class="fex-del" onclick="event.stopPropagation();removeFreeEx('${id}')">âœ•</button>
      <div class="fex-chev open" id="fchev_${id}">â–¾</div>
    </div>
    <div class="fex-body" id="fbody_${id}" style="padding:10px 14px 12px">
      <div class="set-head f-cols"><span>SET</span><span>ë¬´ê²Œ kg</span><span>íšŸìˆ˜ íšŒ</span><span>ë³¼ë¥¨</span><span></span></div>
      <div id="fsets_${id}"></div>
      <div class="set-actions">
        <button class="btn-add-set" onclick="addFreeSet('${id}')">ï¼‹ ì„¸íŠ¸ ì¶”ê°€</button>
        <button class="btn-copy-set" onclick="copyLastFreeSet('${id}')">â†• ì´ì „ ë³µì‚¬</button>
      </div>
    </div>`;
  document.getElementById('free-blocks').appendChild(div);
}

function togFBlock(id) {
  const body = document.getElementById('fbody_'+id);
  const head = document.getElementById('fhead_'+id);
  const chev = document.getElementById('fchev_'+id);
  const open = body.style.display!=='none';
  body.style.display = open?'none':'block';
  head.classList.toggle('open',!open); chev.classList.toggle('open',!open);
}

function addFreeSet(exId, w='', r='') {
  const ex = FREE[exId]; const sid='fs_'+(++fSetCnt); const sn=ex.sets.length+1;
  ex.sets.push({id:sid, weight:w, reps:r});
  const row = document.createElement('div'); row.className='set-row f-cols'; row.id=sid;
  row.innerHTML = `
    <div class="sn sn-f" id="fsn_${sid}">${sn}</div>
    <div class="n-wrap">
      <button class="n-btn" onclick="adj('fw_${sid}',-2.5)">âˆ’</button>
      <input class="n-inp" type="number" id="fw_${sid}" value="${w}" placeholder="kg" min="0" step="2.5" oninput="onFChg('${exId}','${sid}')">
      <button class="n-btn" onclick="adj('fw_${sid}',2.5)">ï¼‹</button>
    </div>
    <div class="n-wrap">
      <button class="n-btn" onclick="adj('fr_${sid}',-1)">âˆ’</button>
      <input class="n-inp" type="number" id="fr_${sid}" value="${r}" placeholder="íšŒ" min="0" step="1" oninput="onFChg('${exId}','${sid}')">
      <button class="n-btn" onclick="adj('fr_${sid}',1)">ï¼‹</button>
    </div>
    <div class="vcell" id="fvol_${sid}">â€”</div>
    <button class="s-del" onclick="delFreeSet('${exId}','${sid}')">âœ•</button>`;
  document.getElementById('fsets_'+exId).appendChild(row);
  updateFBadge(exId);
}

function copyLastFreeSet(exId) {
  const ex=FREE[exId]; if(!ex.sets.length) return;
  const last=ex.sets[ex.sets.length-1];
  addFreeSet(exId, last.weight, last.reps);
  setTimeout(()=>{ const ns=ex.sets[ex.sets.length-1]; onFChg(exId,ns.id); },50);
}

function delFreeSet(exId, sid) {
  FREE[exId].sets = FREE[exId].sets.filter(s=>s.id!==sid);
  document.getElementById(sid)?.remove();
  document.querySelectorAll('#fsets_'+exId+' .sn').forEach((el,i)=>el.textContent=i+1);
  updateFBadge(exId); updateVol();
}

function onFChg(exId, sid) {
  const w=parseFloat(document.getElementById('fw_'+sid).value)||0;
  const r=parseFloat(document.getElementById('fr_'+sid).value)||0;
  const v=w*r;
  const ve=document.getElementById('fvol_'+sid);
  ve.textContent=v>0?v.toLocaleString()+'kg':'â€”'; ve.className='vcell'+(v>0?' on':'');
  document.getElementById('fsn_'+sid).className='sn sn-f'+(v>0?' done':'');
  const s=FREE[exId]?.sets.find(x=>x.id===sid); if(s){s.weight=w;s.reps=r;}
  updateFBadge(exId); updateVol();
  if (PR_DATA[FREE[exId]?.name] && w>PR_DATA[FREE[exId].name] && !prShown[FREE[exId].name]) {
    prShown[FREE[exId].name]=true;
    showPR(FREE[exId].name, w-PR_DATA[FREE[exId].name]);
    setTimeout(()=>{ prShown[FREE[exId].name]=false; },7000);
  }
}

function updateFBadge(exId) {
  const n=FREE[exId]?.sets.length||0;
  const el=document.getElementById('fbadge_'+exId); if(el) el.textContent=n+' SET';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ê³µìš© â€” ë³¼ë¥¨ & PR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function updateVol() {
  let total=0; const items=[];
  if (mode==='trainer') {
    TRAINER_PROG.exercises.forEach(ex=>{
      let v=0; ex.sets.forEach(s=>{v+=(s.weight||0)*(s.reps||0);}); total+=v;
      if(v>0) items.push({name:ex.name, vol:v});
    });
  } else {
    Object.values(FREE).forEach(ex=>{
      let v=0; ex.sets.forEach(s=>{v+=(s.weight||0)*(s.reps||0);}); total+=v;
      if(v>0) items.push({name:ex.name, vol:v});
    });
  }
  document.getElementById('vol-big').textContent = total.toLocaleString();
  const bars = document.getElementById('vol-bars');
  if (!items.length) { bars.innerHTML='<div class="vol-empty">ì„¸íŠ¸ë¥¼ ì…ë ¥í•˜ë©´<br>ìë™ ê³„ì‚°ë©ë‹ˆë‹¤</div>'; return; }
  const max = Math.max(...items.map(i=>i.vol));
  const grad = mode==='trainer'
    ? 'linear-gradient(90deg,var(--pur),var(--blu))'
    : 'linear-gradient(90deg,var(--og),var(--og2))';
  bars.innerHTML = items.map(i=>`
    <div class="vb-row">
      <div class="vb-name">${i.name}</div>
      <div class="vb-track"><div class="vb-fill" style="width:${Math.round(i.vol/max*100)}%;background:${grad}"></div></div>
      <div class="vb-val">${i.vol.toLocaleString()}kg</div>
    </div>`).join('');
}

let prTimeouts = {};
function showPR(name, diff) {
  clearTimeout(prTimeouts[name]);
  const wrap = document.getElementById('pr-wrap');
  wrap.innerHTML = `
    <div class="pr-badge">
      <div class="pr-ico">ğŸ…</div>
      <div>
        <div class="pr-txt">ì‹ ê¸°ë¡ ë‹¬ì„±!</div>
        <div class="pr-sub">${name} +${diff.toFixed(1)}kg ğŸ‰</div>
      </div>
    </div>`;
  prTimeouts[name] = setTimeout(()=>{ wrap.innerHTML=''; },6000);
}

function copyPrevRecord() {
  if (mode==='free') {
    // ììœ  ëª¨ë“œ: ë²¤ì¹˜í”„ë ˆìŠ¤ ì—†ìœ¼ë©´ ì¶”ê°€
    if (!Object.values(FREE).some(e=>e.name==='ë²¤ì¹˜í”„ë ˆìŠ¤')) {
      const chip = [...document.querySelectorAll('.fav-chip')].find(c=>c.textContent.includes('ë²¤ì¹˜í”„ë ˆìŠ¤'));
      if (chip && !chip.classList.contains('sel')) { chip.classList.add('sel'); addFreeEx('ğŸ‹ï¸','ë²¤ì¹˜í”„ë ˆìŠ¤'); }
    }
    const id = Object.keys(FREE).find(k=>FREE[k].name==='ë²¤ì¹˜í”„ë ˆìŠ¤');
    if (!id) return;
    document.getElementById('fsets_'+id).innerHTML=''; FREE[id].sets=[];
    [[60,12],[80,8],[95,5],[100,3]].forEach(([w,r])=>addFreeSet(id,w,r));
    setTimeout(()=>FREE[id].sets.forEach(s=>onFChg(id,s.id)),50);
  }
  toast('ğŸ“‹ ì´ì „ ê¸°ë¡ ë³µì‚¬ ì™„ë£Œ!');
}

function clearAll() {
  if (!confirm('ëª¨ë“  ê¸°ë¡ì„ ì´ˆê¸°í™”í• ê¹Œìš”?')) return;
  if (mode==='trainer') {
    TRAINER_PROG.exercises.forEach(ex=>{
      ex.sets=[];
      document.getElementById('tsets_'+ex.id).innerHTML='';
      for(let i=0;i<ex.tSets;i++) addTSet(ex.id,true);
      updateTBadge(ex.id);
    });
  } else {
    document.getElementById('free-blocks').innerHTML='';
    Object.keys(FREE).forEach(k=>delete FREE[k]);
    fBlkOrder=0; prShown={};
    document.querySelectorAll('.fav-chip.sel').forEach(c=>c.classList.remove('sel'));
  }
  updateVol(); toast('ğŸ—‘ ì´ˆê¸°í™” ì™„ë£Œ');
}

function saveAll() { toast('ğŸ’¾ ìš´ë™ê¸°ë¡ ì €ì¥ ì™„ë£Œ! ì±Œë¦°ì§€ +1íšŒ ğŸ¥•'); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ì›í˜• íƒ€ì´ë¨¸
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let tTotal=90, tLeft=90, tInterval=null, tRunning=false;
const RING=document.getElementById('timer-ring'), CIRC=283;

function setTimer(sec, btn) {
  clearInterval(tInterval); tRunning=false; tTotal=tLeft=sec;
  updateTDisp(); RING.style.strokeDashoffset=0; RING.style.stroke='var(--og)';
  document.getElementById('tc-start-btn').textContent='â–¶ ì‹œì‘';
  document.getElementById('tc-status').textContent='ëŒ€ê¸°ì¤‘';
  if(btn){ document.querySelectorAll('.tc-preset').forEach(p=>p.classList.remove('sel')); btn.classList.add('sel'); }
}

function toggleTimer() {
  if (tRunning) {
    clearInterval(tInterval); tRunning=false;
    document.getElementById('tc-start-btn').textContent='â–¶ ì¬ê°œ';
    document.getElementById('tc-status').textContent='ì¼ì‹œì •ì§€';
  } else {
    if(tLeft<=0){ tLeft=tTotal; RING.style.strokeDashoffset=0; }
    tRunning=true;
    document.getElementById('tc-start-btn').textContent='â¸ ì •ì§€';
    document.getElementById('tc-status').textContent='ì¹´ìš´íŠ¸ë‹¤ìš´';
    tInterval=setInterval(()=>{
      tLeft--; updateTDisp();
      RING.style.strokeDashoffset=CIRC*((tTotal-tLeft)/tTotal);
      if(tLeft<=0){
        clearInterval(tInterval); tRunning=false; RING.style.stroke='var(--grn)';
        document.getElementById('tc-start-btn').textContent='â–¶ ì‹œì‘';
        document.getElementById('tc-status').textContent='ì™„ë£Œ âœ“';
        toast('â° íœ´ì‹ ë! ë‹¤ìŒ ì„¸íŠ¸ ì‹œì‘!');
        setTimeout(()=>{ RING.style.stroke='var(--og)'; document.getElementById('tc-status').textContent='ëŒ€ê¸°ì¤‘'; },3000);
      }
    },1000);
  }
}

function updateTDisp() {
  const m=Math.floor(tLeft/60), s=tLeft%60;
  document.getElementById('timer-display').textContent=String(m).padStart(2,'0')+':'+String(s).padStart(2,'0');
}
updateTDisp();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ê¸°íƒ€
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function adj(inputId, delta) {
  const inp=document.getElementById(inputId);
  inp.value=Math.max(0,+((parseFloat(inp.value)||0)+delta).toFixed(1));
  inp.dispatchEvent(new Event('input'));
}

function actTab(tab) {
  document.querySelectorAll('.t-item').forEach(t=>t.classList.remove('active'));
  tab.classList.add('active');
}

let toastT;
function toast(msg) {
  const t=document.getElementById('toast'); t.textContent=msg; t.classList.add('show');
  clearTimeout(toastT); toastT=setTimeout(()=>t.classList.remove('show'),3000);
}

/* ì´ˆê¸° ì‹¤í–‰ */
renderTrainerProg();
setTrainerUI();
</script>
</body>
</html>
